package com.example.adrian.meteorlag.Interface;

import com.example.adrian.meteorlag.GameAndScenes.GameControl;
import com.example.adrian.meteorlag.GameAndScenes.ResourcesController;

import org.andengine.entity.scene.background.AutoParallaxBackground;
import org.andengine.entity.scene.background.ParallaxBackground;
import org.andengine.entity.sprite.Sprite;
import org.andengine.opengl.texture.region.ITextureRegion;

/**
 * Created by Adrian on 3/15/15.
 */
public class VerticalGameBackground extends AutoParallaxBackground
{
    private ResourcesController resourcesController;
    private ParallaxEntity endingPE;
    private ParallaxEntity repeatingPE;


    public VerticalGameBackground(float changePerSecond)
    {
        super(1.0f,0.0f,0.0f,changePerSecond);

    }

    public VerticalGameBackground(float pParallaxChangePerSecond,ITextureRegion repeatingRegion,ITextureRegion endingRegion,ResourcesController rController)
    {
        super(1.0f, 0.0f, 0.0f, pParallaxChangePerSecond);
        this.resourcesController = rController;

        final float x = GameControl.CAMERA_WIDTH/2;

        Sprite rS= new Sprite(x,0, repeatingRegion,resourcesController.vbom);
        Sprite eS = new Sprite(x,0, endingRegion,resourcesController.vbom);

        this.repeatingPE = new ParallaxBackground.ParallaxEntity(0.5f,rS);
        this.endingPE = new ParallaxBackground.ParallaxEntity(0.5f,eS);

        this.attachParallaxEntity(repeatingPE);

    }

    public void startEndingSequence()
    {
        final float x = GameControl.CAMERA_WIDTH/2;

        this.detachParallaxEntity(repeatingPE);
        this.attachParallaxEntity(endingPE);
    }

}
